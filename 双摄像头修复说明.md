# UnityåŒæ‘„åƒå¤´æ˜¾ç¤ºä¿®å¤

## ğŸ› é—®é¢˜

Unityåªæ˜¾ç¤ºä¸€ä¸ªæ‘„åƒå¤´çš„ç”»é¢ï¼Œå¦ä¸€ä¸ªæ‘„åƒå¤´çš„æ•°æ®æ²¡æœ‰æ­£ç¡®æ›´æ–°ã€‚

## ğŸ” åŸå› åˆ†æ

åŸä»£ç ä¸­ï¼Œ`UpdateTexture` æ–¹æ³•**æ€»æ˜¯æ›´æ–° `camera0Texture`**ï¼Œä¸ç®¡ `camera_id` æ˜¯ä»€ä¹ˆã€‚

```csharp
// åŸæ¥çš„é”™è¯¯ä»£ç 
void UpdateTexture(byte[] imageBytes)
{
    // æ€»æ˜¯æ›´æ–°ç¬¬ä¸€ä¸ªçº¹ç†
    camera0Texture = texture;
    camera0Material.mainTexture = camera0Texture;
}
```

å¯¼è‡´ï¼š
- Pythonå‘é€ä¸¤ä¸ªæ‘„åƒå¤´çš„æ•°æ®
- Unityæ”¶åˆ°ä¸¤æ¡æ•°æ®æµ
- ä½†éƒ½è¦†ç›–åˆ° `camera0Texture`
- `camera1Texture` æ°¸è¿œä¸æ›´æ–°ï¼

## âœ… ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®æ”¹é˜Ÿåˆ—æ•°æ®ç»“æ„

**åŸæ¥**ï¼š
```csharp
private Queue<byte[]> textureUpdateQueue = new Queue<byte[]>();
```

**ç°åœ¨**ï¼š
```csharp
private Queue<(int, byte[])> textureUpdateQueue = new Queue<(int, byte[])>();
```

å­˜å‚¨ `(camera_id, image_bytes)` å…ƒç»„ã€‚

### 2. ä¿å­˜camera_id

åœ¨ `ParseMetadata` ä¸­ä¿å­˜å½“å‰å¸§çš„ `camera_id`ï¼š

```csharp
lock (lockObject)
{
    // ä¿å­˜å½“å‰å¸§çš„camera_id
    currentFrameCameraId = metadata.camera_id;
    // ...
}
```

### 3. å…¥é˜Ÿæ—¶æºå¸¦camera_id

```csharp
lock (lockObject)
{
    textureUpdateQueue.Enqueue((currentFrameCameraId, imageBytes));
}
```

### 4. UpdateTextureæ ¹æ®camera_idåŒºåˆ†

```csharp
void UpdateTexture(int cameraId, byte[] imageBytes)
{
    // åŠ è½½å›¾åƒ
    Texture2D texture = new Texture2D(2, 2);
    texture.LoadImage(imageBytes);
    
    // æ ¹æ®camera_idæ›´æ–°å¯¹åº”çš„çº¹ç†
    if (cameraId == 0)
    {
        camera0Texture = texture;
        camera0Material.mainTexture = camera0Texture;
    }
    else if (cameraId == 1)
    {
        camera1Texture = texture;
        camera1Material.mainTexture = camera1Texture;
    }
}
```

### 5. ä¸»çº¿ç¨‹æ­£ç¡®è§£åŒ…

```csharp
void Update()
{
    lock (lockObject)
    {
        if (textureUpdateQueue.Count > 0)
        {
            (int cameraId, byte[] imageBytes) = textureUpdateQueue.Dequeue();
            UpdateTexture(cameraId, imageBytes);  // ä¼ å…¥camera_id
        }
    }
    // ...
}
```

## ğŸ“Š ä¿®å¤æ•ˆæœ

ç°åœ¨ï¼š
- âœ… `camera_id=0` çš„æ•°æ® â†’ æ›´æ–° `camera0Texture` â†’ æ˜¾ç¤ºåœ¨ `camera0Material`
- âœ… `camera_id=1` çš„æ•°æ® â†’ æ›´æ–° `camera1Texture` â†’ æ˜¾ç¤ºåœ¨ `camera1Material`
- âœ… ä¸¤ä¸ªæ‘„åƒå¤´ç‹¬ç«‹æ›´æ–°ï¼Œä¸ä¼šäº’ç›¸è¦†ç›–

## ğŸ¯ æµ‹è¯•éªŒè¯

åœ¨Unityåœºæ™¯ä¸­é…ç½®ï¼š
- **camera0Material** è¿æ¥åˆ°æ˜¾ç¤ºæ‘„åƒå¤´0ç”»é¢çš„GameObject
- **camera1Material** è¿æ¥åˆ°æ˜¾ç¤ºæ‘„åƒå¤´1ç”»é¢çš„GameObject

åº”è¯¥èƒ½åŒæ—¶çœ‹åˆ°ä¸¤ä¸ªæ‘„åƒå¤´çš„ç”»é¢ã€‚

